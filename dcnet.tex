\begin{tad}{\tadNombre{DCNet}}

\tadIgualdadObservacional{d}{d'}{dcnet}{topologia($d$) \igobs topologia($d'$) \yluego \\ 
								(\paratodo {compu}{c}) ($c\in$ computadoras(topologia($d$)) \impluego \\
								(paquetesEnPC($d$, $c$) \igobs PaquetesEnPC($d'$, $c$) $\wedge$ \\
								\#PaqEnviadosPC($d$, $c$) \igobs \#PaqEnviadosPC($d'$, $c$)))
								}
\tadGeneros{dcnet}
\tadExporta {dcnet, observadores, generadores, PCQueEnvióMasPaq, recorridoPaquete, \#PaquetesEnPC}
\tadUsa {Topología, Cola De Prioridad(paq), Paquete, Computadora}

\tadObservadores
	\tadAlinearFunciones{PCQueEnvioMasPaq}{dcnet/d , conj(compu)/cc}
	\tadOperacion{topologia} {dcnet} {topo} {}
	\tadOperacion{paquetesEnPC} {dcnet/d , compu/c} {colaPrior(paq)} {$c\in$ computadoras(topologia($d$))}
	\tadOperacion{\#PaqEnviadosPC} {dcnet/d , compu/c} {nat} {$c\in$ computadoras(topologia($d$))} 

\tadGeneradores
	\tadOperacion{nuevaRed}{topo}{dcnet}{}
	\tadOperacion{ingresarPaquete} {dcnet , compu , paq} {dcnet} {debe existir ruta al destino}
	\tadOperacion{siguienteSegundo} {dcnet} {dcnet} {}

\tadOtrasOperaciones
	\tadOperacion{paquetesRecibidos} {dcnet , compu} {conj(paq)} {$c\in$ computadoras(topologia($d$))}
	\tadOperacion{siguientePC} {dcnet , compu , compu} {compu} {}
	\tadOperacion{filtrarVaAPC} {conj(compu) , compu} {conj(paq)} {}
	%guarda acá, que filtrarVaAPC requiere paquetesEnPC que es para lo que la uso	(definicion circular)
	\tadOperacion{sacarSiEsDestino} {conj(paq) , compu} {conj(paq)} {}
	
	\tadOperacion{recorridoPaquete} {dcnet , paq} {secu(compu)} {}
	\tadOperacion{PCEnvMasPaqAux} {dcnet/d , conj(compu)/cc} {compu} {$\neg$ $\emptyset?$($cc$) $\wedge$ 
																	$cc$ $\subseteq$ computadoras(topologia($d$))}	
	\tadOperacion{PCQueEnvioMasPaq} {dcnet/d} {compu} {$\neg\emptyset$?(computadoras(topologia($d$)))}   
	\tadOperacion{\#PaquetesEnPC} {dcnet/d , compu/c} {nat}	{$c\in$ computadoras(topologia($d$))}							  


\tadAxiomas [\paratodo {dcnet}{d}, \paratodo {compu}{c, c', actual, destino}, \paratodo{topo}{t}, \paratodo{paq}{p}]
	\tadAlinearAxiomas{paquetesEnPC(ingresarPaquete($d$, $comp'$, $p$), $comp$)}

	\tadAxioma{topologia(nuevaRed($t$))}{t}
	\tadAxioma{topologia(ingresarPaquete($d$, $c$, $p$))} {topologia($d$)}
	\tadAxioma{topologia(siguienteSegundo($d$))} {topologia($d$)}

	\tadAxioma{paquetesEnPC(nuevaRed($t$), $c$)} {vacia}
	\tadAxioma{paquetesEnPC(ingresarPaquete($d$, $c'$, $p$), $c$)} { \IF $c$ = $c'$
																	THEN encolar($p$, paquetesEnPC($d$, $c$))
																	ELSE paquetesEnPC($d$, $c$)
																	FI}	
	\tadAxioma{paquetesEnPC(siguienteSegundo($d$), $c$)}
			  {agregarMuchos(paquetesRecibidos($d$, $c$), 			  
			  
			  \hspace{6.5em}  desencolar(paquetesEnPC($d$, $c$)))}
	
	\tadAxioma{\#PaqEnviadosPC(nuevaRed($t$), $c$)}{0}
	\tadAxioma{\#PaqEnviadosPC(ingresarPaquete($d$, $c'$, $p$), $c$)} {\#PaqEnviadosPC($d$, $c$)}
	\tadAxioma{\#PaqEnviadosPC(siguienteSegundo($d$), $c$)} { \IF vacia?(paquetesEnPC($d$, $c$))
															 THEN \#PaqEnviadosPC($d$, $c$)
															 ELSE 1 + \#PaqEnviadosPC($d$, $c$)
															 FI}	
	
	%Después ver como se puede hacer que esta axiomatización sea más clara	
	\tadAxioma{paquetesRecibidos($d$, $c$)} {sacarSiEsDestino(filtrarVaAPC($d$, \\
												(Ag($c$, vecinos(topologia($d$), $c$), $c$), $c$)}
	
	\tadAxioma{siguientePC($d$, $actual$, $destino$)} {\IF \mbox{long(caminoMasCorto(topologia($d$), $actual$, $destino$))=1}
													   THEN $actual$
													   ELSE \mbox{prim(fin(caminoMasCorto(topologia($d$), $actual$, $destino$}
													   \\)))
													   FI}
	
	\tadAxioma{filtrarVaAPC($d$, $cc$, $c$)} {\IF $\emptyset?$($cc$)
										 	THEN $\emptyset$
										 	ELSE {\IF siguientePC($d$, dameUno($cc$), destinoPaq(próximo(
										 			   paquetesEnPC($d$, dameUno($d$))))) = $c$
										 			THEN Ag(próximo(paquetesEnPC($d$, dameUno($c$)), filtrarVaAPC($d$, sinUno($cc$), $c$)))
										 			ELSE filtrarVaAPC($d$, sinUno($cc$), $c$)
										 			FI}
											 FI}
	
	\tadAxioma{sacarSiEsDestino($cp$, $c$)} {\IF $\emptyset?$($cp$)
											 THEN $\emptyset$
											 ELSE {\IF destinoPaq(dameUno($cp$)) = $c$
											 		THEN sacarSiEsDestino(sinUno($cp$), $c$)
											 		ELSE \mbox{Ag(dameUno($cp$), sacarSiEsDestino(sinUno($cp$), $c$))}
											 		FI}
											 FI} 	
	
	\tadAxioma{PCEnvMasPaqAux($d$, $cc$)} { \IF \#(cc) = 1
												THEN dameUno(cc)
												ELSE {\IF \#PaqEnviadosPC($d$, dameUno($cc$)) $\leq$ \\
										        		 \hspace*{1.1em}\#PaqEnviadosPC($d$, dameUno(sinUno($cc$)))\\
											 		 THEN PCQueEnvioMasPaqAux($d$, sinUno($cc$))
											 		 ELSE PCQueEnvioMasPaqAux($d$, Ag(dameUno($cc$), \\
											 		 \hspace*{14em}				      sinUno($cc$)))
													 FI}
												FI}
	
	\tadAxioma{PCQueEnvióMasPaq($d$)} {\mbox{PCEnvMasPaqAux($d$, computadoras(topologia($d$)))}}
	
	\tadAxioma{\#PaquetesEnPC($d$, $c$)} {cantDeElementos(paquetesEnPC($d$, $c$))}
					
\end{tad}
